<!doctype html><html><head><title>Logarithmic scaling - DemoHut</title><link rel="shortcut icon" href="/demohut/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/demohut/main.css"><meta charset="UTF-8"></head><body><a class="github-corner" href="https://github.com/ZhujinLi/demohut/tree/master/src/subjs/subj-log-scaling" target="_blank" aria-label="View source on GitHub"><svg width="96" height="96" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></a><div class="jumbotron jumbotron-fluid text-monospace" id="jumbotron"><div class="container" style="position: relative"><h1><a href="/demohut/">DemoHut</a></h1></div></div><div class="container"><form class="text-right" action="/demohut/"><button class="btn btn-outline-primary" type="submit">‚Üê all posts</button></form><div class="display-4"><p>Logarithmic scaling</p></div><div id="content"><p>In map applications, scale is represented more preferably in logarithmic form, denoted "zoom" here:</p><math display="block"><mrow><mi>zoom</mi><mo>=</mo><msub><mi>log</mi><mn>2</mn></msub><mfrac><mi>scale</mi><mi><msub><mi>scale</mi><mn>0</mn></msub></mi></mfrac></mrow></math><p>Where <math><msub><mi>scale</mi><mn>0</mn></msub></math> is the scale when zoom is 0. For example, if <math><msub><mi>scale</mi><mn>0</mn></msub><mo>=</mo><mtext>1:4000</mtext></math>, then zoom 3 corresponds to scale 1:500.</p><div style="position:relative;"><div class="row"><div class="col-lg"><canvas id="canvas-cmp"></canvas></div><div class="col-lg"><div class="row"><button id="btn-cmp-zoom-in"><img src="zoom_in.png" height="40px"></button></div><div class="row"><button id="btn-cmp-zoom-out"><img src="zoom_out.png" height="40px"></button></div></div><p style="position:absolute;bottom:10px;left:10px;">Scale (linear)</p><p style="position:absolute;bottom:10px;left:310px;">Zoom (logarithmic)</p></div></div><p>As is showed in the above comparison, the animation in logarithmic form is more consistent.</p><p>If the two concepts are confused, unexpected behaviors might be observed. Following are some I've found in real-world mobile apps.</p><div class="sub-title">1. Camera Translation</div><p>Modern map apps support the gesture "zooming at position" in general. This is the composition of panning and zooming, or "translation" of the camera in 3D world, in both horizontal- and vertical- directions. We expect the trace of the translation to be straight. If zooming is applied logarithmically with the panning linearly, the curve is not straight, and it feels somewhat odd. To correct this, we can either</p><ol><li>use linear zooming (like here), or</li><li>use log panning</li></ol><div style="position:relative;"><canvas id="canvas-translation"></canvas><p style="position:absolute;bottom:10px;left:10px;">Wrong</p><p style="position:absolute;bottom:10px;left:310px;">Correct</p></div><button class="btn-primary" id="btn-translation">Zoom in / Zoom out at pos</button><p></p><div class="sub-title">2. Screen space animation</div><p>Likewise, if screen space animation and world space one are combined, we need to pay special attention to ensure consistent zooming effect. In this example, the route overlay is represented in screen space, and the map is drawn in world space. If we simply apply linear interpolation to the screen coordinates of the route while zooming the map, the two would not matched during the animation. I'll try the second solution to fix this.</p><div style="position:relative;"><canvas id="canvas-screen"></canvas><p style="position:absolute;bottom:10px;left:10px;">Wrong</p><p style="position:absolute;bottom:10px;left:310px;">Correct</p></div><button class="btn-primary" id="btn-screen">Zoom in / Zoom out</button><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script><script src="./subj-log-scaling.js"></script></div><div class="hr-theme-slash-2"><div class="hr-line l"></div><div class="hr-icon"><a href="https://zj-li.gitee.io"><img src="/demohut/res/home.png" height="28px"></a></div><div class="hr-line r"></div></div><p class="text-center text-secondary" style="font-size: 15px">All the demos have been tested on Microsoft Edge/macOS.<br>This site is powered by Gitee Pages.</p></div><script src="/demohut/main.js"></script></body></html>